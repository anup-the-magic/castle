// vim: ft=jsonc
{
  "codeLens.enable": true,
  "diagnostic.messageTarget": "echo",
  "diagnostic.maxWindowHeight": 20,
  "coc.preferences.formatOnType": true,
  "coc.preferences.currentFunctionSymbolAutoUpdate": true,
  "suggest.noselect": true,

  "coc.preferences.formatOnTypeFiletypes": [
    "css",
    "markdown",
    "js",
    "typescript",
    "json",
    "jsonc",
    "elm",
    "haskell",
    "hs"
  ],
  "coc.preferences.formatOnSaveFiletypes": ["*"],
  "languageserver": {
    // haskell
    "haskell-language-server-wrapper": {
      "command": "haskell-language-server-wrapper",
      "args": ["--lsp", "--logfile", "/tmp/hls.log"],
      "rootPatterns": [
        "*.cabal",
        "stack.yaml",
        "cabal.project",
        "package.yaml",
        "hie.yaml"
      ],
      "filetypes": ["hs", "lhs", "haskell", "lhaskell"],
      "languageId": "haskell",
      "initializationOptions": {
        "languageServerHaskell": {
          "hlintOn": 1,
          "formattingProvider": "fourmolu",
          "plugin.fourmolu.config.external": true
        }
      }
    },

    // elm
    "elmlang": {
      "command": "elm-language-server",
      "filetypes": ["elm"],
      "rootPatterns": ["elm.json"],
      "initializationOptions": { "elmAnalyseTrigger": "change" }
    },

    "godot": {
      "command": "npx",
      "args": ["godot-wsl-lsp", "--use-mirrored-networking"],
      "rootPatterns": ["project.godot", ".git"],
      "filetypes": ["gdscript"]
    }
  }
}
